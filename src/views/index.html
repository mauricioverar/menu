{% extends 'base.html' %}
{% from 'macros.html' import navbar %}

{% block main %}
{{ navbar('/', school) }}
<div class="container">
  {% if school.is_admin %}
  <div>
    <button class="btn btn-outline-success mt-3"><a class="btn_new nav-link {% if ruta == '/new_order' %}active{% endif %}" href="/new_order">Nuevo Pedido</a></button>
    <p class="mt-3">Menús</p>
    <p class="d-flex">
      <span class="menu"> M1: </span><span> Vegetariano - </span>
      <span class="menu"> M2: </span><span> Celiaco - </span>
      <span class="menu"> M3: </span><span> Estandar - </span>
      <span class="menu"> M4: </span><span> Vegetariano - </span>
      <span class="menu"> M5: </span><span> Vegetariano</span>
    </p>
  </div>
  {% endif %}
</div>

<div class="row">
  <div class="col-12 border border-3 border-dark mt-4 " style="height: 600px;overflow: scroll;">
    <table class="table table-striped ">
      <thead class="sticky-top bg-dark text-white">
        <tr>
          <th scope="col">Fecha</th>
          <th scope="col">Escuela</th>
          <th scope="col">M1</th>
          <th scope="col">M2</th>
          <th scope="col">M3</th>
          <th scope="col">M4</th>
          <th scope="col">M5</th>
          <th scope="col">Acción</th>
        </tr>
      </thead>
      <tbody>
        {% for orden in ordenes %}
          {% if orden.name %}
            {% if school.is_admin %}
              {% if orden.is_rectified %}
              <tr>
                <td>{{orden.date}}</td>
                <td>{{orden.name}}</td>
                <td>{{orden.vegetarian}}</td>
                <td>{{orden.celiac}}</td>
                <td>{{orden.standard}}</td>
                <td>{{orden.caloric}}</td>
                <td>{{orden.ethnic}}</td>
                <td>
                  <button type="submit" class="btn btn-outline-primary">Ver Detalle</button>
                </td>
              </tr>
              {% else %}
              <tr>
                <td>{{orden.date}}</td>
                <td>{{orden.name}}</td>
                <td>{{orden.vegetarian}}</td>
                <td>{{orden.celiac}}</td>
                <td>{{orden.standard}}</td>
                <td>{{orden.caloric}}</td>
                <td>{{orden.ethnic}}</td>
                <td>
                  <form action="/rectify" method="post">
                    <input id="orden" type="number" class="form-control" name="orden" value={{orden.id_order}} hidden>
                    <input id="fecha" type="text" class="form-control" name="fecha" value="{{orden.date}}" hidden>
      
                    <input type="number" class="form-control" name="vegetarian" value={{orden.vegetarian}} hidden>
                    <input type="number" class="form-control" name="celiac" value={{orden.celiac}} hidden>
                    <input type="number" class="form-control" name="standard" value={{orden.standard}} hidden>
                    <input type="number" class="form-control" name="caloric" value={{orden.caloric}} hidden>
                    <input type="number" class="form-control" name="ethnic" value={{orden.ethnic}} hidden>
      
                    <button type="submit" class="btn btn-outline-primary">Rectificar</button>
      
                  </form>
                </td>
              </tr>
              {%endif%}
            {% else %}
            <tr>
              <td>{{orden.date}}</td>
              <td>{{orden.name}}</td>
              <td>{{orden.vegetarian}}</td>
              <td>{{orden.celiac}}</td>
              <td>{{orden.standard}}</td>
              <td>{{orden.caloric}}</td>
              <td>{{orden.ethnic}}</td>
              <td>
                <button class="btn btn-outline-info"><a href="/login" class="auth-text text-dark">Login</a></button>
              </td>
            </tr>
            {%endif%}
          {%endif%}
        {%endfor%}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}